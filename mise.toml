[tools]

[tasks.install_tools]
description = "mise install"
run = "mise install"

[tasks.install_tpm]
description = "Install Tmux Plugin Manager"
depends = ["install_tools"]
run = """
{{config_root}}/scripts/install_tpm.sh
"""

[tasks.install_oh_my_zsh]
description = "Install Oh My Zsh"
outputs = ["~/.oh-my-zsh/oh-my-zsh.sh"]
run = """
{{config_root}}/scripts/install_oh_my_zsh.sh
"""

[tasks.update_tpm]
description = "Update TPM"
run = """
#!/bin/bash
cd "$HOME/.tmux/plugins/tpm" && git pull
"""

[tasks.nvim_plugins]
description = "Install Vim Plug"
depends = ["install_tools"]
outputs = ["~/.local/share/nvim/site/autoload/plug.vim"]
run = """
{{config_root}}/scripts/setup_nvim_plugin.sh
"""

[tasks.setup]
description = "Install tools and link dotfiles"
depends = ["install_tools","nvim_plugins", "install_oh_my_zsh"]
run = """
#!/bin/bash

if [[ "$OSTYPE" == "darwin"* ]]; then
    echo "üçé On macOS, Running Homebrew..."
    brew bundle --file=$(pwd)/Brewfile
elif [[ "$OS" == "Windows_NT" ]]; then
    echo "ü™ü On WindowsÔºåchoco install.." 
else
    echo "üêß On Linux"
fi

{{config_root}}/scripts/link.sh
"""
